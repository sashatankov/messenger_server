(this.webpackJsonpmessenger=this.webpackJsonpmessenger||[]).push([[0],{34:function(e,t,n){e.exports=n(78)},39:function(e,t,n){},40:function(e,t,n){},70:function(e,t){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(31),c=n.n(o),r=(n(39),n(1)),i=n(2),u=n(3),l=n(4),m=(n(40),n(33)),h=n(32),d=n.n(h),g=(n(73),n(74),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={content:""},a}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.props.onChange(e.target.value)}},{key:"render",value:function(){return s.a.createElement("div",{className:"inputbar"},s.a.createElement("input",{type:"text",onChange:this.handleChange=this.handleChange.bind(this)}))}}]),n}(a.Component)),p=(n(75),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).content=null,"text"===a.props.type?a.content="Send":a.content=s.a.createElement("img",{src:a.props.img,alt:"send"}),a}return Object(i.a)(n,[{key:"handleClick",value:function(){this.props.handleClick()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"sendbutton",onClick:function(){e.handleClick()}},this.content)}}]),n}(a.Component)),f=(n(76),n(77),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{style:{backgroundColor:this.props.backgroundColor},className:"messagebubble"},s.a.createElement("div",{className:"messagebubble-author"},this.props.author),s.a.createElement("div",{className:"messagebubble-content"},this.props.content))}}]),n}(a.Component)),v=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"getBackgroundColor",value:function(e){return this.props.username===e.username?"#0583F2":"#F2F2F2"}},{key:"getClassForMessageRow",value:function(e){return this.props.username===e.username?"messageswindow-row-reverse":"messageswindow-row"}},{key:"getMessages",value:function(){var e=this;return this.props.messages.map((function(t){return s.a.createElement("div",{key:e.props.messages.indexOf(t),className:e.getClassForMessageRow(t)},s.a.createElement("div",{className:"messageswindow-message"},s.a.createElement(f,{author:t.username,content:t.message,backgroundColor:e.getBackgroundColor(t)})))}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"messageswindow"},this.getMessages())}}]),n}(a.Component),b=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={username:a.props.username,currentMessageContent:"",fetchedMessage:"",messages:[]},a.endpoint="http://127.0.0.1:5000",a.setUpSocket(),console.log("In Chat Window, username is: "+a.state.username),a}return Object(i.a)(n,[{key:"submitMessage",value:function(){this.addMessageToState(),this.sendMessage()}},{key:"addMessageToState",value:function(){console.log("message added")}},{key:"sendMessage",value:function(){this.socket.emit("send message",{message:this.state.currentMessageContent,username:this.state.username}),console.log(this.state.username+" sent: "+this.state.currentMessageContent)}},{key:"handleContentChange",value:function(e){this.setState((function(t){return{currentMessageContent:e}}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"chatwindow"},s.a.createElement("div",{className:"chatwindow-messages"},s.a.createElement(v,{username:this.state.username,messages:this.state.messages})),s.a.createElement("div",{className:"chatwindow-input"},s.a.createElement("div",{className:"chatwindow-inputbar"},s.a.createElement(g,{onChange:this.handleContentChange.bind(this)})),s.a.createElement("div",{className:"chatwindow-inputbutton"},s.a.createElement(p,{type:"text",handleClick:function(){e.submitMessage()}}))))}},{key:"setUpSocket",value:function(){var e=this;this.socket=d()(this.endpoint),this.socket.on("connect",(function(){console.log("socket connected")})),this.socket.on("disconnected",(function(){console.log("socket disconnected")})),this.socket.on("receive init messages",(function(t){console.log("init messages "+t.username_message_pairs);var n=JSON.parse(t.username_message_pairs);e.setState((function(e){return{messages:n}}))})),this.socket.on("receive message",(function(t){var n=JSON.parse(t.username_message_pair);e.setState((function(e){return{messages:[].concat(Object(m.a)(e.messages),[n])}}))})),this.socket.emit("fetch init messages")}}]),n}(a.Component),k=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={username:window.location.href.slice(window.location.href.lastIndexOf("/")+1)},a}return Object(i.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"App-chatwindow"},s.a.createElement(b,{username:this.state.username})))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.50a9af3e.chunk.js.map